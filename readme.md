# JS Best Practice Guide
1. <a href='#first-section'>Объявление переменных</a>
2. <a href='#second-section'>Избегание глобальных переменных</a>
3. <a href='#third-section'>Операторы сравнения</a>
4. <a href='#fourth-section'>Создание новых объектов и массивов</a>
5. <a href='#fifth-section'>Использование тернарных операторов</a>
6. <a href='#sixth-section'>Использование Switch</a>
7. <a href='#seventh-section'>Неявное преобразование типов</a>
8. <a href='#eighth-section'>Проблема плавающих точек</a>
9. <a href='#ninth-section'>Использование Class</a>
10. <a href='#tenth-section'>Размещение скрипта в HTML файле</a>


## <a name='first-section'>1. Объявление переменных</a>
+ Объявляйте все переменные в верхней части кода. Данная практика считается хорошей, поскольку она позволяет:
    - видеть более чистый код;
    - не искать переменные по всему скрипту;
    - снизить вероятность повторных объявлений переменных.
    ````
    //объявляем переменные в начале нашего скрипта
    let firstName, lastName, price, discount, fullPrice;

    //и используем их после
    firstName = "Никита";
    lastName = "Родионов";

    price = 0.90;
    discount = 0.10;

    fullPrice = price * 100 / discount;
    ````

## <a name='second-section'>2. Избегание глобальных переменных</a>
+ Старайтесь уменьшать количество глобальных переменных. Глобальные переменные будут доступны во всем коде JavaScript, поэтому существует вероятность конфликта имен, когда разные части кода будут определять глобальные переменные с одинаковым именем, но используемые для различных целей.
    ````
    //плохо
    let name = 'Никита';
    let lastName = 'Родионов';

    function doSomething() {...}

    console.log(name); //Никита

    //хорошо
    let person = {
    	name: 'Никита',
    	lastName: 'Родионов',

    	function doSomething() {...},
    }

    console.log(name); //ошибка
    console.log(person.name); //Никита
    ````

## <a name='third-section'>3. Операторы сравнения</a>
+ Для сравнения в JavaScript используйте оператор `===(!==)` вместо `==(!=)`. Оператор `==` в действительности не сравнивает объекты, а пытается привести их к одному типу. К примеру, в выражении `5 == '5'`, строка справа конвертируется в число, и только потом сравнивается. Тогда как `===(!==)` не делает такого преобразования. Использование сравнения с преобразованием типов может привести к непредвиденным проблемам, связанным с особенностями конвертации разных типов. Например, Объекты String имеют тип Object, а не String.
    ````
    //истина, так как оба операнда имеют тип String
    'foo' === 'foo'

    let a = new String('foo');
    let b = new String('foo');

    //ложь, так как операнды являются объектами, внутренние ссылки которых, ссылаются на разные объекты в памяти
    a == b 

    a === b 

    //истина, так как объект a (String) будет преобразован в строку 'foo', перед сопоставлением
    a == 'foo'
    ````

## <a name='fourth-section'>4. Создание новых объектов и массивов</a>
+ Не создавайте массивы через конструктор `new Array()`. Конструкторы массивов подвержены ошибкам:
    ````
    // Длина массива будет равна 3.
    let a1 = new Array(x1, x2, x3);

    // Длина массива будет равна 2.
    let a2 = new Array(x1, x2);

    // Если x1 является числом и это натуральное число, длина массива будет равна x1.
    // Если x1 является ненатуральным числом, то это вызовет ошибку
    // В остальных случаях массив будет иметь 1 элемент
    let a3 = new Array(x1);

    // Длина массива будет равна 0.
    let a4 = new Array();
    ````
+ Поэтому, правильнее будет создавать массивы, используя квадратные скобки:
    ````
    let a = [x1, x2, x3];
    let a2 = [x1, x2];
    let a3 = [x1];
    let a4 = [];
    ````
+ У конструкторов объектов нет таких проблем, однако, для лучшей читаемости так же следует использовать фигурные скобки вместо создания объектов через конструктор new Object.
    ````
    //плохо
    let o = new Object();

    let o2 = new Object();
    o2.a = 0;
    o2.b = 1;
    o2.c = 2;
    o2['strange key'] = 3;

    //хорошо
    let o = {};

    let o2 = {
      a: 0,
      b: 1,	
      c: 2,
      'strange key': 3
    };
    ````

## <a name='fifth-section'>5. Использование тернарных операторов</a>
+ Используйте тернарные операторы. Это сокращает код:
    ````
    //вместо этого
    if (val) {
      return foo();
    } else {
      return bar();
    }

    //можно записать так
    return val ? foo() : bar();
    ````

## 6. <a name='sixth-section'>6. Использование Switch</a>
+ Необходимо всегда завершать `switch` с помощью `default`. Даже если кажется, что в нем нет необходимости. Это позволяет иметь обходной сценарий на случай ошибки в коде.
    ````
    switch (new Date().getDay()) {
      case 0:
        day = "Sunday";
        break;
      case 1:
        day = "Monday";
        break;
      case 2:
        day = "Tuesday";
        break;
      case 3:
        day = "Wednesday";
        break;
      case 4:
        day = "Thursday";
        break;
      case 5:
        day = "Friday";
        break;
      case 6:
        day = "Saturday";
        break;
      default:
        day = "Unknown";
}
    ````

## <a name='seventh-section'>7. Неявное преобразование типов</a>
+ Избегайте неявного преобразования типов.
    ````
    let x = "Hello";     //typeof x is a string
    x = 5;               //changes typeof x to a number
    ````
+ Данная практика способна порождать ошибки в операциях.
    ````
    let x = 5 + 7;       //x.valueOf() is 12,  typeof x is a number
    let x = 5 + "7";     //x.valueOf() is 57,  typeof x is a string
    let x = "5" + 7;     //x.valueOf() is 57,  typeof x is a string
    let x = 5 - 7;       //x.valueOf() is -2,  typeof x is a number
    let x = 5 - "7";     //x.valueOf() is -2,  typeof x is a number
    let x = "5" - 7;     //x.valueOf() is -2,  typeof x is a number
    let x = 5 - "x";     //x.valueOf() is NaN, typeof x is a number
    ````
+ Однажды объявленная переменная должна хранить один и тот же тип данных. При операциях, для того чтобы получить число, иной раз стоит явно преобразовать переменную к числу:
    ````
    let foo = +bar % 5;
    ````

##  <a name='eighth-section'>8. Проблема плавающих точек</a>
+ Все числа в JavaScript с плавающей точкой внутри представляются как 64 битные в двоичном виде по стандарту IEEE 754, поэтому если мы, например, попытаемся сложить десятичные дроби, то нас может ожидать непредсказуемый результат:
    ````
    console.log(0.1 + 0.2); // 0.30000000000000004
    ````
+ Число 0.1 (одна десятая) записывается просто в десятичном формате. Но в двоичной системе счисления это бесконечная дробь, так как единица на десять в двоичной системе так просто не делится. Также бесконечной дробью является 0.2 (=2/10). Когда мы складываем 0.1 и 0.2, то две неточности складываются, получаем незначительную, но всё же ошибку в вычислениях.
+ Вы можете использовать методы toFixed() и toPrecision(), чтобы избежать подобных проблем.
    ````
    console.log( +( 0.1 + 0.2 ).toFixed(10));  //0.3
    console.log( +(0.1 + 0.2).toPrecision(1));  //0.3
    ````

## <a name='ninth-section'>9. Использование Class</a>
+ Синтаксис `Class` является более интуитивно понятным.
    ````
    // плохо
    function User(name) {
      this.name = name;
    }

    User.prototype.sayHi = function() {
      alert(this.name);
    }

    // хорошо
    class User {

      constructor(name) {
        this.name = name;
      }

      sayHi() {
        alert(this.name);
     }

    }

    let user = new User('Никита');
    user.sayHi(); // Никита
    ````

## <a name='tenth-section'>10. Размещение скрипта в HTML файле</a>
+ Размещайте скрипты в конце HTML документа, перед закрывающим тегом `</body>`. Основная цель этого совета — заставить страницу грузиться как можно быстрее. Когда браузер грузит скрипт, он не продолжит рендеринг, пока весь файл не будет загружен. Таким образом, пользователю придется ждать дольше. Если ваши JS скрипты служат для добавления функционала — например, обработки кликов кнопки то вам стоит перенести скрипты вниз поставив их перед закрывающимся тегом body.
    ````
        <p>And now you know my favorite kinds of corn. </p>  
        <script type="text/javascript" src="path/to/file.js"></script>  
        <script type="text/javascript" src="path/to/anotherFile.js"></script>  
      </body>  
    </html>
    ````